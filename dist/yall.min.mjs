/* yall.js v2.2.2 */
export default function(e){const t={intersectionObserverSupport:"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype,mutationObserverSupport:"MutationObserver"in window,idleCallbackSupport:"requestIdleCallback"in window,eventsToBind:[[document,"scroll"],[document,"touchmove"],[window,"resize"],[window,"orientationchange"]]},o={lazyClass:"lazy",lazyBackgroundClass:"lazy-bg",lazyBackgroundLoaded:"lazy-bg-loaded",throttleTime:200,idlyLoad:!1,idleLoadTimeout:100,threshold:200,observeChanges:!1,observeRootSelector:"body",mutationObserverOptions:{childList:!0,subtree:!0},...e},l=`img.${o.lazyClass},video.${o.lazyClass},iframe.${o.lazyClass},.${o.lazyBackgroundClass}`,r={timeout:o.idleLoadTimeout},a=e=>[].slice.call(e),s=(e,l=0,n=[])=>{if(e)if(e.classList.contains("is-lazyloaded")){if(n.length>0&&l<n.length){const e=l+1;s(n[e],e,n)}}else{if("IMG"===e.tagName){let d=e.parentNode;"PICTURE"===d.tagName&&a(d.querySelectorAll("source")).forEach(e=>i(e)),i(e),e.classList.remove(o.lazyClass),e.classList.add("is-lazyloading"),e.addEventListener("load",()=>{if(e.classList.remove("is-lazyloading"),e.classList.add("is-lazyloaded"),n.length>0&&l<n.length){const e=l+1;!0===o.idlyLoad&&!0===t.idleCallbackSupport?requestIdleCallback(()=>{s(n[e],e,n)},r):s(n[e],e,n)}})}"VIDEO"===e.tagName&&(a(e.querySelectorAll("source")).forEach(e=>i(e)),i(e),!0===e.autoplay&&e.load()),"IFRAME"===e.tagName&&i(e),e.classList.contains(o.lazyBackgroundClass)&&(e.classList.remove(o.lazyBackgroundClass),e.classList.add(o.lazyBackgroundLoaded))}},i=e=>{null!==e.getAttribute("data-srcset")&&e.setAttribute("srcset",e.getAttribute("data-srcset")),null!==e.getAttribute("data-src")&&e.setAttribute("src",e.getAttribute("data-src")),null!==e.getAttribute("data-poster")&&e.setAttribute("poster",e.getAttribute("data-poster"))},n=()=>{let e=!1;!1===e&&d.length>0&&(e=!0,setTimeout(()=>{d.forEach(e=>{e.getBoundingClientRect().top<=window.innerHeight+o.threshold&&e.getBoundingClientRect().bottom>=-o.threshold&&"none"!==getComputedStyle(e).display&&(!0===o.idlyLoad&&!0===t.idleCallbackSupport?requestIdleCallback(()=>{s(e)},r):s(e),d=d.filter(t=>t!==e))}),e=!1,0===d.length&&!1===o.observeChanges&&t.eventsToBind.forEach(e=>e[0].removeEventListener(e[1],n))},o.throttleTime))};let d=a(document.querySelectorAll(l));if(!0===t.intersectionObserverSupport){var c=new IntersectionObserver((e,l)=>{e.forEach(e=>{if(!0===e.isIntersecting||e.intersectionRatio>0){let a=e.target;!0===o.idlyLoad&&!0===t.idleCallbackSupport?requestIdleCallback(()=>s(a),r):s(a),l.unobserve(a),d=d.filter(e=>e!==a)}})},{rootMargin:`${o.threshold}px 0%`});d.forEach(e=>{c.observe(e)})}else t.eventsToBind.forEach(e=>e[0].addEventListener(e[1],n)),n();!0===t.mutationObserverSupport&&!0===o.observeChanges&&new MutationObserver(e=>{e.forEach(()=>{a(document.querySelectorAll(l)).forEach(e=>{-1===d.indexOf(e)&&(d.push(e),!0===t.intersectionObserverSupport?c.observe(e):n())})}),!0===o.idlyLoad&&!0===t.idleCallbackSupport&&requestIdleCallback(()=>{s(a(document.querySelectorAll(l))[0],0,a(document.querySelectorAll(l)))},r)}).observe(document.querySelector(o.observeRootSelector),o.mutationObserverOptions),!0===o.idlyLoad&&!0===t.idleCallbackSupport&&requestIdleCallback(()=>{s(d[0],0,d)},r)}
